{% extends "theme/theme.html" %}

{% block title %}Início{% endblock %}

{% block content %}
<section class="ponto">
    <div class="container">
        <form action="{{url}}/bater-ponto" method="post">
            <div class="row px-5">
                <div class="col-lg-12 flex-wrap" id="radio-funcs">
                    {% for user in users %}
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="radioFuncs" id="radioFuncs{{user.id}}"
                            value="{{user.id}}">
                        <label class="form-check-label" for="radioFuncs{{user.id}}">{{user.name}}</label>
                    </div>
                    {% endfor %}
                </div>
            </div>
            <div class="row mt-5 justify-content-center">
                <div class="col-lg-4">
                    <input type="password" name="passwd" class="form-control" placeholder="Sua senha...">
                </div>
            </div>
            <div class="row px-5 mt-5">
                <div class="col-lg-12 flex-wrap" id="radio-funcs">
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="radioTipo" id="radioTipo1" value="Entrada">
                        <label class="form-check-label" for="radioTipo1">Entrada</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="radioTipo" id="radioTipo2" value="Saida">
                        <label class="form-check-label" for="radioTipo2">Saída</label>
                    </div>
                </div>
            </div>
            <div class="row mt-5 text-center">
                <div class="col-lg-12">
                    <button type="submit" class="btn btn-success px-5 fs-5">Confirmar</button>
                </div>
            </div>
            <input type="hidden" id="id" name="id">
            <input type="hidden" id="tipo" name="tipo">
        </form>
        <table class="table table-dark table-striped my-5">
            <thead>
                <tr>
                    <th scope="col">Matrícula</th>
                    <th scope="col">Nome</th>
                    <th scope="col">Idade</th>
                    <th scope="col">Setor</th>
                    <th scope="col">Data e Hora</th>
                    <th scope="col">Ponto</th>
                    <th scope="col">CPF</th>
                </tr>
            </thead>
            <tbody>
                {% for ponto in pontos %}
                <tr>
                    <td scope="row">{{ponto.users_id}}</td>
                    <td>{{ponto.name}}</td>
                    <td>{{ponto.birth_date}}</td>
                    <td>{{ponto.setor}}</td>
                    <td>{{ponto.datetime}}</td>
                    <td>{{ponto.type}}</td>
                    <td>{{ponto.cpf}}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script>
    document.getElementsByName("radioFuncs").forEach(radio => {
        radio.addEventListener("click", () => {
            if (radio.checked) {
                document.getElementById("id").value = radio.value;
            }
        });
    });

    document.getElementsByName("radioTipo").forEach(tipo => {
        tipo.addEventListener("click", () => {
            if (tipo.checked) {
                document.getElementById("tipo").value = tipo.value;
            }
        });
    });
</script>
{% endblock %}